(this.webpackJsonpnew=this.webpackJsonpnew||[]).push([[0],{72:function(e,t,n){e.exports=n(99)},77:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var o=n(8),r=n(1),a=n.n(r),i=n(24),l=n.n(i),c=(n(77),n(31)),s=n(16),u=n(9),m=n(44),f=n(52),p="\nvarying vec3 vColor;\nvoid main() {\n  gl_FragColor = vec4( vColor.rgb, 1.0 );\n}";function v(e){var t=e.points,n=t.map((function(e){return e.slice(0,3).map((function(e){return Number(e)}))})).filter((function(e){return e.find((function(e){return!isNaN(e)}))})).map((function(e){return[e[0],e[2],e[1]]})).flat(),o=t.map((function(e){return e.slice(3).map((function(e){return Number(e)/255}))})).flat(),i=Object(r.useMemo)((function(){return{time:{value:1}}}),[]),l=Object(r.useMemo)((function(){return new Float32Array(n)}),[n]),c=Object(r.useMemo)((function(){return new Float32Array(o)}),[o]),s=Object(r.useRef)();return Object(u.e)((function(e){var t=e.clock;s.current&&(s.current.material.uniforms.time.value=t.getElapsedTime(),s.current.geometry.verticesNeedUpdate=!0)})),a.a.createElement("points",{ref:s},a.a.createElement("bufferGeometry",{attach:"geometry"},a.a.createElement("bufferAttribute",{attachObject:["attributes","position"],count:l.length/3,array:l,itemSize:3}),a.a.createElement("bufferAttribute",{attachObject:["attributes","color"],count:c.length/3,array:c,itemSize:3})),a.a.createElement("shaderMaterial",{attach:"material",uniforms:i,vertexShader:"\nuniform float time;\nvarying vec3 vColor;\nvarying vec3 pos;\nvoid main() {\n    pos = position;\n    vColor = color;\n    gl_Position = projectionMatrix \n        * modelViewMatrix\n        * vec4(\n            vec3(\n              sin(time * 0.01 * sin(time * 0.01 * pos[0])) + pos[0],\n              sin(time * 0.01 * cos(time * 0.02 * pos[1])) + pos[1],\n              sin(time * 0.01 * sin(time * 0.05 * pos[2])) + pos[2]\n            ), 1.0);\n    gl_PointSize = 3.0;\n}",fragmentShader:"\nvarying vec3 vColor;\nuniform float time;\nvoid main() {\n  vec3 col = vColor;\n  gl_FragColor = vec4(sin(time + col[0] + (time * col[0] * 0.3)), cos(time + col[1] + (time * col[1] * 0.3)), sin(time + col[2] + (time * col[2] * 0.3)), 1.0);\n}",vertexColors:!0}))}var b=function(e){var t=e.url,n=Object(r.useState)(),i=Object(o.a)(n,2),l=i[0],c=i[1],s=Object(r.useState)(),p=Object(o.a)(s,2),b=p[0],d=p[1],g=Object(r.useRef)();return Object(r.useEffect)((function(){console.log(window.location.hostname);fetch(t).then(Object(f.a)({onProgress(e){100===e.percentage?d("Loading..."):d(e.percentage+"%")}})).then((function(e){return d("Loading"),e.text()})).then((function(e){var t=e.split("\n");c(t.map((function(e){return e.split(" ")}))),d("Loaded")}))}),[c]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{backgroundColor:"black",width:"100vw",height:"100vh",position:"absolute",visibility:"Loaded"===b?"hidden":"visible",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",top:0,bottom:0,right:0,left:0,backgroundBlendMode:"normal",fontFamily:"Helvetica, Sans-Serif",fontSize:"32px",fontWeight:"lighter"}},a.a.createElement("span",{style:{color:"white"}},b)),a.a.createElement(u.a,{onClick:function(){return console.log(g.current,g.current.object)},camera:{position:[10,5,-5]}},l&&a.a.createElement(v,{points:l}),a.a.createElement(m.a,{ref:g,target:[0,3.3,1.5]})))},d=n(0),g=n(94),h={default:{position:[1.5,1,1.8],target:[.3,1,0]},"models/MaksyCrew.ply":{position:[1.5,1,1.8],target:[.3,1,0],vert:"\nuniform float time;\nvarying vec3 vColor;\nvarying vec3 pos;\nvoid main() {\n    pos = position;\n    vColor = color;\n    float speed = 2.0;\n    float coef = 20.0;\n    gl_Position = projectionMatrix \n        * modelViewMatrix\n        * vec4(\n            vec3(\n              sin(time * speed + pos[0] * coef) * 0.01 + pos[0],\n              cos(time * speed + pos[1] * coef) * 0.01 + pos[1],\n              sin(time * speed + pos[2] * coef) * 0.01 + pos[2]\n            ), 1.0);\n    gl_PointSize = 3.0;\n}",frag:p},"models/Lift.ply":{position:[1.4,1,-.6],target:[.3,1,0],vert:"\nuniform float time;\nvarying vec3 vColor;\nvarying vec3 pos;\nvoid main() {\n    pos = position;\n    vColor = color;\n    float speed = 2.0;\n    gl_Position = projectionMatrix \n        * modelViewMatrix\n        * vec4(\n            vec3(\n              sin(time * speed + pos[0]) * 0.15 + pos[0],\n              cos(time * speed + pos[1]) * 0.15 + pos[1],\n              sin(time * speed + pos[2]) * 0.15 + pos[2]\n            ), 1.0);\n    gl_PointSize = 3.0;\n}",frag:"\nvarying vec3 vColor;\nvarying vec3 pos;\nuniform float time;\nvoid main() {\n  vec3 col = vColor;\n  float speed = 2.0;\n  gl_FragColor = vec4(\n    col[0] + (sin(time * speed + pos[0]) * 0.3 ),\n    col[1] + (sin(time * speed + pos[1]) * 0.3),\n    col[2] + (sin(time * speed + pos[2]) * 0.3),\n    1.0);\n}"}};function y(e){var t=e.points,n=e.url,o=Object(r.useMemo)((function(){return{time:{value:1}}}),[]),i=Object(r.useMemo)((function(){return t.attributes.position.array}),[t.attributes.position]),l=Object(r.useMemo)((function(){return t.attributes.color.array}),[t.attributes.color]),c=Object(r.useRef)();return Object(u.e)((function(e){var t=e.clock;c.current&&(c.current.material.uniforms.time.value=t.getElapsedTime(),c.current.geometry.verticesNeedUpdate=!0)})),a.a.createElement("points",{ref:c,rotation:[-Math.PI/2,0,0]},a.a.createElement("bufferGeometry",{attach:"geometry"},a.a.createElement("bufferAttribute",{attachObject:["attributes","position"],count:i.length/3,array:i,itemSize:3}),a.a.createElement("bufferAttribute",{attachObject:["attributes","color"],count:l.length/3,array:l,itemSize:3})),a.a.createElement("shaderMaterial",{attach:"material",uniforms:o,vertexShader:h[n]?h[n].vert:"\nuniform float time;\nvarying vec3 vColor;\nvarying vec3 pos;\nvoid main() {\n    pos = position;\n    vColor = color;\n    gl_Position = projectionMatrix \n        * modelViewMatrix\n        * vec4(position, 1.0);\n    gl_PointSize = 3.0;\n}",fragmentShader:h[n]?h[n].frag:p,vertexColors:!0}))}var E=function(e){var t=e.url,n=Object(r.useState)(),i=Object(o.a)(n,2),l=i[0],c=i[1],s=Object(r.useState)(),f=Object(o.a)(s,2),p=(f[0],f[1],Object(r.useRef)(),Object(r.useRef)());return Object(r.useEffect)((function(){g(d),(new d.PLYLoader).load(t,(function(e){l||c(e)}))})),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{backgroundColor:"black",width:"100vw",height:"100vh",position:"absolute",visibility:l?"hidden":"visible",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",top:0,bottom:0,right:0,left:0,backgroundBlendMode:"normal",fontFamily:"Helvetica, Sans-Serif",fontSize:"32px",fontWeight:"lighter"}},a.a.createElement("span",{style:{color:"white"}},"Loading...")),a.a.createElement(u.a,{onClick:function(){return console.log(p.current,p.current.object)},camera:{position:h[t]?h[t].position:h.default.position}},l&&a.a.createElement(y,Object.assign({points:l},{url:t})),a.a.createElement(m.a,{ref:p,target:h[t]?h[t].target:h.default.target})))},j=function(){return a.a.createElement("div",null,a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(c.b,{to:"/"},"Home")),a.a.createElement("li",null,a.a.createElement(c.b,{to:"/hall"},"Hall")),a.a.createElement("li",null,a.a.createElement(c.b,{to:"/room"},"Room")),a.a.createElement("li",null,a.a.createElement(c.b,{to:"/lift"},"Lift"))))},O=function(){var e=Object(r.useState)("localhost"===window.location.hostname),t=Object(o.a)(e,1)[0];return a.a.createElement(c.a,{basename:t?"/":"/shader-points/"},a.a.createElement(s.a,{path:"/",exact:!0},a.a.createElement(j,null)),a.a.createElement(s.a,{path:"/hall"},a.a.createElement(b,{url:t?"models/32FFF.xyz":"https://bby.blob.core.windows.net/$web/32FFF.xyz"})),a.a.createElement(s.a,{path:"/room"},a.a.createElement(E,{url:"models/MaksyCrew.ply"})),a.a.createElement(s.a,{path:"/lift"},a.a.createElement(E,{url:"models/Lift.ply"})))};l.a.render(a.a.createElement(O,null),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.e433c433.chunk.js.map