(this.webpackJsonpnew=this.webpackJsonpnew||[]).push([[0],{72:function(e,t,n){e.exports=n(99)},77:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var r=n(8),a=n(1),o=n.n(a),c=n(24),i=n.n(c),l=(n(77),n(51)),u=n(16),s=n(9),m=n(43),f=n(52),b="\nvarying vec3 vColor;\nvoid main() {\n  gl_FragColor = vec4( vColor.rgb, 1.0 );\n}",d="\nuniform float time;\nvarying vec3 vColor;\nvoid main() {\n    vColor = color;\n    gl_Position = projectionMatrix \n        * modelViewMatrix\n        * vec4(position, 1.0);\n    gl_PointSize = 3.0;\n}";function g(e){var t=e.points,n=t.map((function(e){return e.slice(0,3).map((function(e){return Number(e)}))})).filter((function(e){return e.find((function(e){return!isNaN(e)}))})).map((function(e){return[e[0],e[2],e[1]]})).flat(),r=t.map((function(e){return e.slice(3).map((function(e){return Number(e)/255}))})).flat(),c=Object(a.useMemo)((function(){return{time:{value:1}}}),[]),i=Object(a.useMemo)((function(){return new Float32Array(n)}),[n]),l=Object(a.useMemo)((function(){return new Float32Array(r)}),[r]),u=Object(a.useRef)();return Object(s.e)((function(e){var t=e.clock;u.current&&(u.current.material.uniforms.time.value=t.getElapsedTime(),u.current.geometry.verticesNeedUpdate=!0)})),o.a.createElement("points",{ref:u},o.a.createElement("bufferGeometry",{attach:"geometry"},o.a.createElement("bufferAttribute",{attachObject:["attributes","position"],count:i.length/3,array:i,itemSize:3}),o.a.createElement("bufferAttribute",{attachObject:["attributes","color"],count:l.length/3,array:l,itemSize:3})),o.a.createElement("shaderMaterial",{attach:"material",uniforms:c,vertexShader:d,fragmentShader:b,vertexColors:!0}))}var h=function(e){var t=e.url,n=Object(a.useState)(),c=Object(r.a)(n,2),i=c[0],l=c[1],u=Object(a.useState)(),b=Object(r.a)(u,2),d=b[0],h=b[1],p=Object(a.useRef)();return Object(a.useEffect)((function(){console.log(window.location.hostname);fetch(t).then(Object(f.a)({onProgress(e){100===e.percentage?h("Loading..."):h(e.percentage+"%")}})).then((function(e){return h("Loading"),e.text()})).then((function(e){var t=e.split("\n");l(t.map((function(e){return e.split(" ")}))),h("Loaded")}))}),[l]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{backgroundColor:"black",width:"100vw",height:"100vh",position:"absolute",visibility:"Loaded"===d?"hidden":"visible",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",top:0,bottom:0,right:0,left:0,backgroundBlendMode:"normal",fontFamily:"Helvetica, Sans-Serif",fontSize:"32px",fontWeight:"lighter"}},o.a.createElement("span",{style:{color:"white"}},d)),o.a.createElement(s.a,{onClick:function(){return console.log(p.current,p.current.object)},camera:{position:[10,5,-5]}},i&&o.a.createElement(g,{points:i}),o.a.createElement(m.a,{ref:p,target:[0,3.3,1.5]})))},p=n(0),v=n(94);function j(e){var t=e.points,n=Object(a.useMemo)((function(){return{time:{value:1}}}),[]),r=Object(a.useMemo)((function(){return t.attributes.position.array}),[t.attributes.position]),c=Object(a.useMemo)((function(){return t.attributes.color.array}),[t.attributes.color]),i=Object(a.useRef)();return Object(s.e)((function(e){var t=e.clock;i.current&&(i.current.material.uniforms.time.value=t.getElapsedTime(),i.current.geometry.verticesNeedUpdate=!0)})),o.a.createElement("points",{ref:i},o.a.createElement("bufferGeometry",{attach:"geometry"},o.a.createElement("bufferAttribute",{attachObject:["attributes","position"],count:r.length/3,array:r,itemSize:3}),o.a.createElement("bufferAttribute",{attachObject:["attributes","color"],count:c.length/3,array:c,itemSize:3})),o.a.createElement("shaderMaterial",{attach:"material",uniforms:n,vertexShader:d,fragmentShader:b,vertexColors:!0}))}var E=function(e){var t=e.url,n=Object(a.useState)(),c=Object(r.a)(n,2),i=c[0],l=c[1],u=Object(a.useState)(),f=Object(r.a)(u,2),b=f[0],d=(f[1],Object(a.useRef)(),Object(a.useRef)());return Object(a.useEffect)((function(){v(p),console.log(t);var e=new p.PLYLoader;new p.Object3D;e.load(t,(function(e){i||(l(e),console.log(i))}))})),Object(a.useEffect)((function(){console.log(i)}),[i]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{backgroundColor:"black",width:"100vw",height:"100vh",position:"absolute",visibility:"hidden",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",top:0,bottom:0,right:0,left:0,backgroundBlendMode:"normal",fontFamily:"Helvetica, Sans-Serif",fontSize:"32px",fontWeight:"lighter"}},o.a.createElement("span",{style:{color:"white"}},b)),o.a.createElement(s.a,{onClick:function(){return console.log(d.current,d.current.object)},camera:{position:[10,5,-5]}},i&&o.a.createElement(j,{points:i}),o.a.createElement(m.a,{ref:d,target:[0,3.3,1.5]})))},O=function(){var e=Object(a.useState)("localhost"===window.location.hostname),t=Object(r.a)(e,1)[0],n=Object(a.useState)("models/Lift.ply"),c=Object(r.a)(n,1)[0],i=Object(a.useState)("models/MaksyCrew.ply"),s=Object(r.a)(i,1)[0];return o.a.createElement(l.a,null,o.a.createElement(u.a,{path:"/hall",exact:!0},o.a.createElement(h,{url:t?"models/32FFF.xyz":"https://bby.blob.core.windows.net/$web/32FFF.xyz"})),o.a.createElement(u.a,{path:"/room"},o.a.createElement(E,{url:s})),o.a.createElement(u.a,{path:"/lift"},o.a.createElement(E,{url:c})))};i.a.render(o.a.createElement(O,null),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.8ff1737f.chunk.js.map