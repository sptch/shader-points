(this.webpackJsonpnew=this.webpackJsonpnew||[]).push([[0],{72:function(e,t,n){e.exports=n(99)},77:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var a=n(8),r=n(1),o=n.n(r),i=n(24),l=n.n(i),c=(n(77),n(31)),u=n(16),m=n(9),s=n(44),f=n(52),b="\nvarying vec3 vColor;\nvoid main() {\n  gl_FragColor = vec4( vColor.rgb, 1.0 );\n}",d="\nuniform float time;\nvarying vec3 vColor;\nvoid main() {\n    vColor = color;\n    gl_Position = projectionMatrix \n        * modelViewMatrix\n        * vec4(position, 1.0);\n    gl_PointSize = 3.0;\n}";function p(e){var t=e.points,n=t.map((function(e){return e.slice(0,3).map((function(e){return Number(e)}))})).filter((function(e){return e.find((function(e){return!isNaN(e)}))})).map((function(e){return[e[0],e[2],e[1]]})).flat(),a=t.map((function(e){return e.slice(3).map((function(e){return Number(e)/255}))})).flat(),i=Object(r.useMemo)((function(){return{time:{value:1}}}),[]),l=Object(r.useMemo)((function(){return new Float32Array(n)}),[n]),c=Object(r.useMemo)((function(){return new Float32Array(a)}),[a]),u=Object(r.useRef)();return Object(m.e)((function(e){var t=e.clock;u.current&&(u.current.material.uniforms.time.value=t.getElapsedTime(),u.current.geometry.verticesNeedUpdate=!0)})),o.a.createElement("points",{ref:u},o.a.createElement("bufferGeometry",{attach:"geometry"},o.a.createElement("bufferAttribute",{attachObject:["attributes","position"],count:l.length/3,array:l,itemSize:3}),o.a.createElement("bufferAttribute",{attachObject:["attributes","color"],count:c.length/3,array:c,itemSize:3})),o.a.createElement("shaderMaterial",{attach:"material",uniforms:i,vertexShader:d,fragmentShader:b,vertexColors:!0}))}var h=function(e){var t=e.url,n=Object(r.useState)(),i=Object(a.a)(n,2),l=i[0],c=i[1],u=Object(r.useState)(),b=Object(a.a)(u,2),d=b[0],h=b[1],g=Object(r.useRef)();return Object(r.useEffect)((function(){console.log(window.location.hostname);fetch(t).then(Object(f.a)({onProgress(e){100===e.percentage?h("Loading..."):h(e.percentage+"%")}})).then((function(e){return h("Loading"),e.text()})).then((function(e){var t=e.split("\n");c(t.map((function(e){return e.split(" ")}))),h("Loaded")}))}),[c]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{backgroundColor:"black",width:"100vw",height:"100vh",position:"absolute",visibility:"Loaded"===d?"hidden":"visible",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",top:0,bottom:0,right:0,left:0,backgroundBlendMode:"normal",fontFamily:"Helvetica, Sans-Serif",fontSize:"32px",fontWeight:"lighter"}},o.a.createElement("span",{style:{color:"white"}},d)),o.a.createElement(m.a,{onClick:function(){return console.log(g.current,g.current.object)},camera:{position:[10,5,-5]}},l&&o.a.createElement(p,{points:l}),o.a.createElement(s.a,{ref:g,target:[0,3.3,1.5]})))},g=n(0),E=n(94),v={default:{position:[1.5,1,1.8],target:[.3,1,0]},"models/MaksyCrew.ply":{position:[1.5,1,1.8],target:[.3,1,0]},"models/Lift.ply":{position:[1.4,1,-.6],target:[.3,1,0]}};function y(e){var t=e.points,n=Object(r.useMemo)((function(){return{time:{value:1}}}),[]),a=Object(r.useMemo)((function(){return t.attributes.position.array}),[t.attributes.position]),i=Object(r.useMemo)((function(){return t.attributes.color.array}),[t.attributes.color]),l=Object(r.useRef)();return Object(m.e)((function(e){var t=e.clock;l.current&&(l.current.material.uniforms.time.value=t.getElapsedTime(),l.current.geometry.verticesNeedUpdate=!0)})),o.a.createElement("points",{ref:l,rotation:[-Math.PI/2,0,0]},o.a.createElement("bufferGeometry",{attach:"geometry"},o.a.createElement("bufferAttribute",{attachObject:["attributes","position"],count:a.length/3,array:a,itemSize:3}),o.a.createElement("bufferAttribute",{attachObject:["attributes","color"],count:i.length/3,array:i,itemSize:3})),o.a.createElement("shaderMaterial",{attach:"material",uniforms:n,vertexShader:d,fragmentShader:b,vertexColors:!0}))}var j=function(e){var t=e.url,n=Object(r.useState)(),i=Object(a.a)(n,2),l=i[0],c=i[1],u=Object(r.useState)(),f=Object(a.a)(u,2),b=(f[0],f[1],Object(r.useRef)(),Object(r.useRef)());return Object(r.useEffect)((function(){E(g),(new g.PLYLoader).load(t,(function(e){l||c(e)}))})),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{backgroundColor:"black",width:"100vw",height:"100vh",position:"absolute",visibility:l?"hidden":"visible",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",top:0,bottom:0,right:0,left:0,backgroundBlendMode:"normal",fontFamily:"Helvetica, Sans-Serif",fontSize:"32px",fontWeight:"lighter"}},o.a.createElement("span",{style:{color:"white"}},"Loading...")),o.a.createElement(m.a,{onClick:function(){return console.log(b.current,b.current.object)},camera:{position:v[t]?v[t].position:v.default.position}},l&&o.a.createElement(y,{points:l}),o.a.createElement(s.a,{ref:b,target:v[t]?v[t].target:v.default.target})))},O=function(){return o.a.createElement("div",null,o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(c.b,{to:"/"},"Home")),o.a.createElement("li",null,o.a.createElement(c.b,{to:"/hall"},"Hall")),o.a.createElement("li",null,o.a.createElement(c.b,{to:"/room"},"Room")),o.a.createElement("li",null,o.a.createElement(c.b,{to:"/will-not-match"},"Lift"))))},w=function(){var e=Object(r.useState)("localhost"===window.location.hostname),t=Object(a.a)(e,1)[0];return o.a.createElement(c.a,{basename:t?"/":"/shader-points/"},o.a.createElement(u.a,{path:"/",exact:!0},o.a.createElement(O,null)),o.a.createElement(u.a,{path:"/hall",exact:!0},o.a.createElement(h,{url:t?"models/32FFF.xyz":"https://bby.blob.core.windows.net/$web/32FFF.xyz"})),o.a.createElement(u.a,{path:"/room",exact:!0},o.a.createElement(j,{url:"models/MaksyCrew.ply"})),o.a.createElement(u.a,{path:"/lift",exact:!0},o.a.createElement(j,{url:"models/Lift.ply"})))};l.a.render(o.a.createElement(w,null),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.c086a36c.chunk.js.map