(this.webpackJsonpnew=this.webpackJsonpnew||[]).push([[0],{72:function(e,t,n){e.exports=n(99)},77:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var r=n(8),a=n(1),o=n.n(a),i=n(24),l=n.n(i),c=(n(77),n(31)),s=n(16),u=n(9),m=n(44),f=n(52),p="\nvarying vec3 vColor;\nvoid main() {\n  gl_FragColor = vec4( vColor.rgb, 1.0 );\n}",b="\nuniform float time;\nvarying vec3 vColor;\nvarying vec3 pos;\nvoid main() {\n    pos = position;\n    vColor = color;\n    float speed = 2.0;\n    gl_Position = projectionMatrix \n        * modelViewMatrix\n        * vec4(\n            vec3(\n              sin(time * speed + pos[0]) * 0.15 + pos[0],\n              cos(time * speed + pos[1]) * 0.15 + pos[1],\n              sin(time * speed + pos[2]) * 0.15 + pos[2]\n            ), 1.0);\n    gl_PointSize = 3.0;\n}";function v(e){var t=e.points,n=t.map((function(e){return e.slice(0,3).map((function(e){return Number(e)}))})).filter((function(e){return e.find((function(e){return!isNaN(e)}))})).map((function(e){return[e[0],e[2],e[1]]})).flat(),r=t.map((function(e){return e.slice(3).map((function(e){return Number(e)/255}))})).flat(),i=Object(a.useMemo)((function(){return{time:{value:1}}}),[]),l=Object(a.useMemo)((function(){return new Float32Array(n)}),[n]),c=Object(a.useMemo)((function(){return new Float32Array(r)}),[r]),s=Object(a.useRef)();return Object(u.e)((function(e){var t=e.clock;s.current&&(s.current.material.uniforms.time.value=t.getElapsedTime(),s.current.geometry.verticesNeedUpdate=!0)})),o.a.createElement("points",{ref:s},o.a.createElement("bufferGeometry",{attach:"geometry"},o.a.createElement("bufferAttribute",{attachObject:["attributes","position"],count:l.length/3,array:l,itemSize:3}),o.a.createElement("bufferAttribute",{attachObject:["attributes","color"],count:c.length/3,array:c,itemSize:3})),o.a.createElement("shaderMaterial",{attach:"material",uniforms:i,vertexShader:b,fragmentShader:p,vertexColors:!0}))}var d=function(e){var t=e.url,n=Object(a.useState)(),i=Object(r.a)(n,2),l=i[0],c=i[1],s=Object(a.useState)(),p=Object(r.a)(s,2),b=p[0],d=p[1],g=Object(a.useRef)();return Object(a.useEffect)((function(){console.log(window.location.hostname);fetch(t).then(Object(f.a)({onProgress(e){100===e.percentage?d("Loading..."):d(e.percentage+"%")}})).then((function(e){return d("Loading"),e.text()})).then((function(e){var t=e.split("\n");c(t.map((function(e){return e.split(" ")}))),d("Loaded")}))}),[c]),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{backgroundColor:"black",width:"100vw",height:"100vh",position:"absolute",visibility:"Loaded"===b?"hidden":"visible",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",top:0,bottom:0,right:0,left:0,backgroundBlendMode:"normal",fontFamily:"Helvetica, Sans-Serif",fontSize:"32px",fontWeight:"lighter"}},o.a.createElement("span",{style:{color:"white"}},b)),o.a.createElement(u.a,{onClick:function(){return console.log(g.current,g.current.object)},camera:{position:[10,5,-5]}},l&&o.a.createElement(v,{points:l}),o.a.createElement(m.a,{ref:g,target:[0,3.3,1.5]})))},g=n(0),h=n(94),E={default:{position:[1.5,1,1.8],target:[.3,1,0]},"models/MaksyCrew.ply":{position:[1.5,1,1.8],target:[.3,1,0],vert:"\nuniform float time;\nvarying vec3 vColor;\nvarying vec3 pos;\nvoid main() {\n    pos = position;\n    vColor = color;\n    float speed = 2.0;\n    float coef = 20.0;\n    gl_Position = projectionMatrix \n        * modelViewMatrix\n        * vec4(\n            vec3(\n              sin(time * speed + pos[0] * coef) * 0.01 + pos[0],\n              cos(time * speed + pos[1] * coef) * 0.01 + pos[1],\n              sin(time * speed + pos[2] * coef) * 0.01 + pos[2]\n            ), 1.0);\n    gl_PointSize = 3.0;\n}",frag:p},"models/Lift.ply":{position:[1.4,1,-.6],target:[.3,1,0],vert:b,frag:"\nvarying vec3 vColor;\nvarying vec3 pos;\nuniform float time;\nvoid main() {\n  vec3 col = vColor;\n  float speed = 2.0;\n  gl_FragColor = vec4(\n    col[0] + (sin(time * speed + pos[0]) * 0.3 ),\n    col[1] + (sin(time * speed + pos[1]) * 0.3),\n    col[2] + (sin(time * speed + pos[2]) * 0.3),\n    1.0);\n}"}};function y(e){var t=e.points,n=e.url,r=Object(a.useMemo)((function(){return{time:{value:1}}}),[]),i=Object(a.useMemo)((function(){return t.attributes.position.array}),[t.attributes.position]),l=Object(a.useMemo)((function(){return t.attributes.color.array}),[t.attributes.color]),c=Object(a.useRef)();return Object(u.e)((function(e){var t=e.clock;c.current&&(c.current.material.uniforms.time.value=t.getElapsedTime(),c.current.geometry.verticesNeedUpdate=!0)})),o.a.createElement("points",{ref:c,rotation:[-Math.PI/2,0,0]},o.a.createElement("bufferGeometry",{attach:"geometry"},o.a.createElement("bufferAttribute",{attachObject:["attributes","position"],count:i.length/3,array:i,itemSize:3}),o.a.createElement("bufferAttribute",{attachObject:["attributes","color"],count:l.length/3,array:l,itemSize:3})),o.a.createElement("shaderMaterial",{attach:"material",uniforms:r,vertexShader:E[n]?E[n].vert:"\nuniform float time;\nvarying vec3 vColor;\nvarying vec3 pos;\nvoid main() {\n    pos = position;\n    vColor = color;\n    gl_Position = projectionMatrix \n        * modelViewMatrix\n        * vec4(position, 1.0);\n    gl_PointSize = 3.0;\n}",fragmentShader:E[n]?E[n].frag:p,vertexColors:!0}))}var j=function(e){var t=e.url,n=Object(a.useState)(),i=Object(r.a)(n,2),l=i[0],c=i[1],s=Object(a.useState)(),f=Object(r.a)(s,2),p=(f[0],f[1],Object(a.useRef)(),Object(a.useRef)());return Object(a.useEffect)((function(){h(g),(new g.PLYLoader).load(t,(function(e){l||c(e)}))})),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{backgroundColor:"black",width:"100vw",height:"100vh",position:"absolute",visibility:l?"hidden":"visible",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",top:0,bottom:0,right:0,left:0,backgroundBlendMode:"normal",fontFamily:"Helvetica, Sans-Serif",fontSize:"32px",fontWeight:"lighter"}},o.a.createElement("span",{style:{color:"white"}},"Loading...")),o.a.createElement(u.a,{onClick:function(){return console.log(p.current,p.current.object)},camera:{position:E[t]?E[t].position:E.default.position}},l&&o.a.createElement(y,Object.assign({points:l},{url:t})),o.a.createElement(m.a,{ref:p,target:E[t]?E[t].target:E.default.target})))},O=function(){return o.a.createElement("div",null,o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement(c.b,{to:"/"},"Home")),o.a.createElement("li",null,o.a.createElement(c.b,{to:"/hall"},"Hall")),o.a.createElement("li",null,o.a.createElement(c.b,{to:"/room"},"Room")),o.a.createElement("li",null,o.a.createElement(c.b,{to:"/lift"},"Lift"))))},w=function(){var e=Object(a.useState)("localhost"===window.location.hostname),t=Object(r.a)(e,1)[0];return o.a.createElement(c.a,{basename:t?"/":"/shader-points/"},o.a.createElement(s.a,{path:"/",exact:!0},o.a.createElement(O,null)),o.a.createElement(s.a,{path:"/hall"},o.a.createElement(d,{url:t?"models/32FFF.xyz":"https://bby.blob.core.windows.net/$web/32FFF.xyz"})),o.a.createElement(s.a,{path:"/room"},o.a.createElement(j,{url:"models/MaksyCrew.ply"})),o.a.createElement(s.a,{path:"/lift"},o.a.createElement(j,{url:"models/Lift.ply"})))};l.a.render(o.a.createElement(w,null),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.b34b007a.chunk.js.map