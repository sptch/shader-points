{"version":3,"sources":["assets/frag.js","assets/vert.js","components/XYZModel/index.js","components/PLYModel/index.js","index.js"],"names":["Particles","points","initialPositions","map","v","slice","w","Number","filter","g","find","isNaN","flat","initialColors","uniforms","useMemo","time","value","positions","Float32Array","colors","geom","useRef","useFrame","clock","current","material","getElapsedTime","geometry","verticesNeedUpdate","ref","attach","attachObject","count","length","array","itemSize","vertexShader","vert","fragmentShader","frag","vertexColors","url","useState","setPoints","progress","setProgress","controls","useEffect","console","log","window","location","hostname","fetch","then","fetchProgress","onProgress","percentage","r","text","data","lines","split","style","backgroundColor","width","height","position","visibility","textAlign","display","alignItems","justifyContent","top","bottom","right","left","backgroundBlendMode","fontFamily","fontSize","fontWeight","color","onClick","object","camera","target","THREE","require","PLYLoader","attributes","loader","Object3D","load","App","local","lift","room","path","exact","XYZModel","PLYModel","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8ff1737f.chunk.js","sourcesContent":["export default `\nvarying vec3 vColor;\nvoid main() {\n  gl_FragColor = vec4( vColor.rgb, 1.0 );\n}`","export default `\nuniform float time;\nvarying vec3 vColor;\nvoid main() {\n    vColor = color;\n    gl_Position = projectionMatrix \n        * modelViewMatrix\n        * vec4(position, 1.0);\n    gl_PointSize = 3.0;\n}`","import React, { useEffect, useMemo, useRef, useState } from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport { Canvas, useFrame } from \"react-three-fiber\"\r\nimport { OrbitControls } from 'drei'\r\nimport fetchProgress from 'fetch-progress'\r\nimport frag from 'assets/frag'\r\nimport vert from 'assets/vert'\r\n\r\nfunction Particles({points}) {\r\n\r\n  const initialPositions = points.map(v=>v.slice(0,3).map(w=>Number(w))).filter(g=>g.find(v=>!isNaN(v))).map(v=>[v[0],v[2],v[1]]).flat()\r\n  const initialColors = points.map(v=>v.slice(3).map(w=>Number(w)/255)).flat()\r\n  const uniforms = useMemo(() => ({ time: { value: 1.0 } }), [])\r\n  const positions = useMemo(() => new Float32Array(initialPositions), [initialPositions])\r\n  const colors = useMemo(() => new Float32Array(initialColors),[initialColors])\r\n\r\n  const geom = useRef()\r\n  useFrame(({ clock }) => {\r\n    if (geom.current) {\r\n      geom.current.material.uniforms.time.value = clock.getElapsedTime()\r\n      geom.current.geometry.verticesNeedUpdate = true\r\n    }\r\n  })\r\n\r\n  return (\r\n    <points ref={geom}>\r\n      <bufferGeometry attach=\"geometry\">\r\n        <bufferAttribute attachObject={[\"attributes\", \"position\"]} count={positions.length / 3} array={positions} itemSize={3} />\r\n        {/* <bufferAttribute attachObject={[\"attributes\", \"velocity\"]} count={velocities.length / 3} array={velocities} itemSize={3} />\r\n        <bufferAttribute attachObject={[\"attributes\", \"acceleration\"]} count={accelerations.length / 3} array={accelerations} itemSize={3} /> */}\r\n        <bufferAttribute attachObject={[\"attributes\", \"color\"]} count={colors.length / 3} array={colors} itemSize={3} />\r\n\r\n      </bufferGeometry>\r\n      <shaderMaterial \r\n        attach=\"material\" \r\n        uniforms={uniforms}\r\n        vertexShader={vert}\r\n        fragmentShader={frag}\r\n        vertexColors\r\n      />\r\n    </points>\r\n  )\r\n}\r\n\r\nexport default ({url})=>{\r\n\r\n  const [points, setPoints] = useState()\r\n  const [progress, setProgress] = useState()\r\n  const controls = useRef()\r\n  \r\n  useEffect(()=>{\r\n      console.log(window.location.hostname)\r\n      const response = fetch(url).then(\r\n        fetchProgress({\r\n          onProgress(progress) {\r\n            if(progress.percentage===100){\r\n              setProgress('Loading...');\r\n            }else{\r\n              setProgress(progress.percentage+'%');\r\n            }\r\n          },\r\n        })\r\n      ).then(r=>{ setProgress('Loading'); return r.text();}\r\n      ).then(data=>{\r\n        const lines = data.split(\"\\n\")\r\n        setPoints(lines.map(v=>v.split(' '))) \r\n        setProgress('Loaded') \r\n      })\r\n  },[ setPoints ])\r\n\r\n  return <>\r\n    <div style={{\r\n      backgroundColor:'black', \r\n      width:'100vw', \r\n      height: '100vh', \r\n      position:'absolute', \r\n      visibility: progress==='Loaded'?'hidden':'visible',\r\n      textAlign:'center',\r\n      display: 'flex',\r\n      alignItems: 'center', /* Vertical center alignment */\r\n      justifyContent: 'center',\r\n      top:0,\r\n      bottom:0, \r\n      right:0, \r\n      left:0,\r\n      backgroundBlendMode: 'normal',\r\n      fontFamily: 'Helvetica, Sans-Serif',\r\n      fontSize: '32px',\r\n      fontWeight:'lighter'\r\n    }} >\r\n      <span style={{color:'white'}}>\r\n        {progress}\r\n      </span>\r\n    </div>\r\n    <Canvas \r\n      onClick={()=>console.log(controls.current, controls.current.object)} \r\n      camera={{ position: [10, 5, -5] }}\r\n    >\r\n      {points && <Particles points={points} />}\r\n      <OrbitControls \r\n        ref={controls} \r\n        target={[0, 3.3, 1.5]} \r\n      />\r\n    </Canvas>\r\n  </>\r\n}","import React, { useEffect, useMemo, useRef, useState } from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\n// import * as THREE from 'three'\r\nimport { Canvas, useFrame } from \"react-three-fiber\"\r\nimport { OrbitControls } from 'drei'\r\nimport fetchProgress from 'fetch-progress'\r\nimport frag from 'assets/frag'\r\nimport vert from 'assets/vert'\r\nimport { Route, useHistory } from 'react-router-dom'\r\nconst THREE = require('three');\r\nconst PLYLoader = require('three-ply-loader');\r\n\r\nfunction Particles({points}) {\r\n\r\n  const uniforms = useMemo(() => ({ time: { value: 1.0 } }), [])\r\n  const positions = useMemo(() =>points.attributes.position.array, [points.attributes.position])\r\n  const colors = useMemo(() => points.attributes.color.array, [points.attributes.color])\r\n  // console.log(colors, positions)\r\n  const geom = useRef()\r\n  useFrame(({ clock }) => {\r\n    if (geom.current) {\r\n      geom.current.material.uniforms.time.value = clock.getElapsedTime()\r\n      geom.current.geometry.verticesNeedUpdate = true\r\n    }\r\n  })\r\n\r\n  return (\r\n    <points ref={geom}>\r\n      <bufferGeometry attach=\"geometry\">\r\n        <bufferAttribute attachObject={[\"attributes\", \"position\"]} count={positions.length / 3} array={positions} itemSize={3} />\r\n        {/* <bufferAttribute attachObject={[\"attributes\", \"velocity\"]} count={velocities.length / 3} array={velocities} itemSize={3} />\r\n        <bufferAttribute attachObject={[\"attributes\", \"acceleration\"]} count={accelerations.length / 3} array={accelerations} itemSize={3} /> */}\r\n        <bufferAttribute attachObject={[\"attributes\", \"color\"]} count={colors.length / 3} array={colors} itemSize={3} />\r\n\r\n      </bufferGeometry>\r\n      <shaderMaterial \r\n        attach=\"material\" \r\n        uniforms={uniforms}\r\n        vertexShader={vert}\r\n        fragmentShader={frag}\r\n        vertexColors\r\n      />\r\n    </points>\r\n  )\r\n}\r\n\r\nexport default ({url})=>{\r\n  const [points, setPoints] = useState()\r\n  const [progress, setProgress] = useState()\r\n  const camera = useRef()\r\n  const controls = useRef()\r\n\r\n  useEffect(()=>{\r\n    PLYLoader(THREE);\r\n\r\n    console.log(url)\r\n    const loader = new THREE.PLYLoader();\r\n    const group = new THREE.Object3D();\r\n    loader.load(url, function (geometry) {\r\n      if(!points) {\r\n        setPoints(geometry)\r\n        console.log(points)\r\n      }\r\n    });\r\n    \r\n  })\r\n  useEffect(()=>{console.log(points)},[points])\r\n\r\n\r\n  return  <>\r\n    <div style={{\r\n      backgroundColor:'black', \r\n      width:'100vw', \r\n      height: '100vh', \r\n      position:'absolute', \r\n      visibility: 'hidden',\r\n      textAlign:'center',\r\n      display: 'flex',\r\n      alignItems: 'center', /* Vertical center alignment */\r\n      justifyContent: 'center',\r\n      top:0,\r\n      bottom:0, \r\n      right:0, \r\n      left:0,\r\n      backgroundBlendMode: 'normal',\r\n      fontFamily: 'Helvetica, Sans-Serif',\r\n      fontSize: '32px',\r\n      fontWeight:'lighter'\r\n    }} >\r\n      <span style={{color:'white'}}>\r\n        {progress}\r\n      </span>\r\n    </div>\r\n\r\n    <Canvas \r\n      onClick={()=>console.log(controls.current, controls.current.object)} \r\n      camera={{ position: [10, 5, -5] }}\r\n    >\r\n      {points && <Particles points={points} />}\r\n      <OrbitControls \r\n        ref={controls} \r\n        target={[0, 3.3, 1.5]} \r\n      />\r\n    </Canvas>\r\n  </>\r\n}\r\n","import React, { useEffect, useMemo, useRef, useState } from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport { Canvas, useFrame } from \"react-three-fiber\"\r\nimport \"./styles.css\"\r\nimport { BrowserRouter as Router, useHistory, Route, useLocation } from \"react-router-dom\";\r\nimport XYZModel from 'components/XYZModel'\r\nimport PLYModel from 'components/PLYModel'\r\n\r\nconst App = ()=>{\r\n  const [local] = useState(window.location.hostname==='localhost')\r\n  const [lift] = useState('models/Lift.ply')\r\n  const [room] = useState('models/MaksyCrew.ply')\r\n\r\n  return (\r\n    <Router>\r\n      <Route path='/hall' exact >\r\n        <XYZModel url={local? 'models/32FFF.xyz': 'https://bby.blob.core.windows.net/$web/32FFF.xyz'} />\r\n      </Route>\r\n      <Route path='/room' >\r\n        <PLYModel url={room} />\r\n      </Route>\r\n      <Route path='/lift' >\r\n        <PLYModel url={lift} />\r\n      </Route>\r\n    </Router>\r\n  )\r\n}\r\n\r\nReactDOM.render(<App/>, document.getElementById(\"root\"))\r\n"],"sourceRoot":""}